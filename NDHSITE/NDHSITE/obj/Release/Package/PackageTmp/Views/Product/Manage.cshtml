@model PagedList.IPagedList<NDHSITE.Models.ProductInfo>
@using PagedList.Mvc;
@{
    ViewBag.Title = "Manage";
}

<div class="page-header">
    <h3 class="page-title">Quản lý sản phẩm</h3>

    <ol class="breadcrumb">
        <li><a href="/home">Trang chủ</a></li>
        <li><a href="#">Quản lý sản phẩm</a></li>
    </ol>
</div> <!-- /.page-header -->

<p class="">Trang quản lý sản phẩm của công ty cổ phần Nông Dược Hai, đây là trang chỉ cấp quyền cho Admin.</p>

<div class="portlet portlet-boxed">

    <div class="portlet-body">
        <div class="layout layout-main-right layout-stack-sm">
            <div class="col-md-2 col-sm-3 layout-sidebar">
                <ul id="myTab" class="nav nav-layout-sidebar nav-stacked">
                    <li class="active">
                        <a href="#allproduct" data-toggle="tab">
                            Danh sách sản phẩm
                        </a>
                    </li>
                    <li>
                        <a href="#addproduct" data-toggle="tab">
                            Thêm sản phẩm
                        </a>
                    </li>
                    <li>
                        <a href="#addfromexcel" data-toggle="tab">
                            Thêm từ Excel
                        </a>
                    </li>
                    <li>
                        <a href="/product/productseri" >
                            Danh sách seri
                        </a>
                    </li>
                </ul>
            </div>
            <div class="col-md-10 col-sm-9 layout-main">
                <div id="settings-content" class="tab-content stacked-content">
                    <div class="tab-pane fade in active" id="allproduct">

                        <div class="row">
                            <form method="get">
                                <input type="hidden" value="@ViewBag.SType" name="type" />
                                <div class="col-sm-8">
                                    <div class="input-group">
                                        <input type="text" class="form-control" name="search" value="@ViewBag.SearchText" />
                                        <div class="input-group-btn">
                                            <button type="submit" class="btn btn-primary">Tìm sản phẩm</button>
                                        </div><!-- /btn-group -->
                                    </div>
                                </div>
        
                            </form>
                        </div>

                        <br />

                        <fieldset>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Mã sản phẩm</th>
                                        <th>Tên sản phẩm</th>
                                        <th>Thông tin</th>
                                        <th>#</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in Model)
                                    {
                                        <tr>
                                            <td>@item.PCode</td>
                                            <td>@item.PName</td>
                                            <td class="file-info valign-middle">
                                                <span><strong class="semibold">Nhà sản xuất:</strong> @item.Producer</span> <br />
                                                <span><strong class="semibold">Mã barcode:</strong> @item.Barcode</span><br />
                                                <span><strong class="semibold">Điểm thẻ:</strong> @item.CardPoint</span><br />
                                                <span><strong class="semibold">Điểm thùng:</strong> @item.BoxPoint</span><br />
                                                <span><strong class="semibold">Số hộp:</strong> @item.QuantityBox</span><br />
                                                <span><strong class="semibold">Cho CII quét hộp:</strong>@(item.IsBox == 1 ? "Quét hộp" : "Quét thùng")</span><br />
                                                
                                            </td>
                                            <td class="text-center valign-middle">
                                                <a  href="/product/modifyproduct/@item.Id" target="_blank">Sửa</a> <br /><br />
                                                <a href="javascript:deleteFunc('@item.Id')">Xóa</a>
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                            Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount
                            @Html.PagedListPager(Model, page => Url.Action("manage",
                              new { page, search = ViewBag.SearchText, type = ViewBag.SType }))
                        </fieldset>

                        <form method="post" action="/product/delete" id="formdelete" onsubmit="if(!confirm('Xóa sản phẩm?')){return false;}">
                            <input type="hidden" name="Id" id="productid" />
                        </form>

                    </div>
                    <div class="tab-pane fade" id="addproduct">
                        <form method="post" onsubmit="if(!confirm('Thêm sản phẩm mới?')){return false;}" action="/product/addproduct" enctype="multipart/form-data">
                            <fieldset>
                                <div class="row">

                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Tên sản phẩm</label>
                                            <input type="text" name="PName" class="form-control" />
                                        </div>
                                    </div>

                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Mã sản phẩm</label>
                                            <input type="text" name="PCode" class="form-control" />
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Barcode</label>
                                            <input type="text" name="Barcode" class="form-control" />
                                        </div>
                                    </div>
                              
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Tên thương mại</label>
                                            <input type="text" name="CommerceName" class="form-control" />
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Nhà sản xuất</label>
                                            <input type="text" name="Producer" class="form-control" />
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Nhà phân phối</label>
                                            <input type="text" name="Register" class="form-control" />
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Đơn vị tính</label>
                                            <input type="text" name="Unit" class="form-control" />
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Nhóm sản phẩm</label>
                                            <select name="PGroup" class="form-control" >
                                                @foreach(var item in ViewBag.PGroup)
                                                {
                                                    <option value="@item.Id">@item.Name</option>
                                                }
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Độ độc</label>
                                            <input type="text" name="Poision" class="form-control" />
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Ảnh hiển thị</label>
                                            <input type="file" name="Thumbnail" class="form-control" pattern="([^\s]+(\.(?i)(png))$)"  />
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Mô tả</label>
                                            <textarea name="Describe" class="form-control"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Hướng dẫn</label>
                                            <textarea name="Introduce" class="form-control"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Chủ ý</label>
                                            <textarea name="Notes" class="form-control"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Lưu ý khác</label>
                                            <textarea name="Other" class="form-control"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Công dụng</label>
                                            <textarea name="Uses" class="form-control"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Hoặt tính</label>
                                            <textarea name="Activce" class="form-control"></textarea>
                                        </div>
                                    </div>
                                 
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Điểm thẻ</label>
                                            <input type="text" name="CardPoint" class="form-control" />
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Điểm thùng</label>
                                            <input type="text" name="BoxPoint" class="form-control" />
                                        </div>
                                    </div>

                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Số lượng hộp</label>
                                            <input type="number" name="QuantityBox" class="form-control" />
                                        </div>

                                        <div class="form-group">
                                            <label>Yêu cầu CII quét hộp</label>
                                            <input type="checkbox" name="IsBox" class="form-control"/>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Sản phẩm trọng tâm</label>
                                            <input type="checkbox" name="Forcus"class="form-control" />
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Sản phẩm mới</label>
                                            <input type="checkbox" name="New" class="form-control"/>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Hình ảnh</label>
                                            <input type="file" name="files" class="form-control" multiple pattern="([^\s]+(\.(?i)(png))$)" />
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <button class="btn btn-primary" type="submit">Thêm sản phẩm</button>
                                </div>
                            </fieldset>
                        </form>
                    </div>
                    <div class="tab-pane fade" id="addfromexcel">
                        <fieldset>
                            <form method="post" enctype="multipart/form-data" onsubmit="if(!confirm('Thêm sản phẩm mới?')){return false;}" action="/product/excelProduct">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label>Tải file Excel sản phẩm lên:</label>
                                            <input type="file" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" class="form-control" name="files" />
                                            <a href="~/haiupload/dmsp.xlsx" class="form-control">Tải file mẫu</a>
                                        </div>
                                       
                                        <button class="btn-primary btn" type="submit">Cập nhật</button>
                                    </div>
                                </div>
                            </form>
                        </fieldset>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts {

    <script type="text/javascript">
        function addtype(id, name) {
            console.log(name);
            $('input[name=type]').val(id);
            $('#btnchoose').html(name);
        }


        function deleteFunc(id) {
            $("#productid").val(id);
            $("#formdelete").submit();
        }


    </script>
}