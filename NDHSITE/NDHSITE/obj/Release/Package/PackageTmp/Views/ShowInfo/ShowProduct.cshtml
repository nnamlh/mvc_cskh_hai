@model PagedList.IPagedList<NDHSITE.Models.ProductInfo>
@using PagedList.Mvc;
@{
    ViewBag.Title = "Sản phẩm";
}

<div class="portlet portlet-boxed">
    <div class="portlet-header">
        <h4 class="portlet-title">
            Danh sách sản phẩm
        </h4>
    </div> <!-- /.portlet-header -->
    <div class="portlet-body">


        <div class="row">
            <form method="get">
                <input type="hidden" value="@ViewBag.SType" name="type" />
                <div class="col-sm-8">
                    <div class="input-group">
                        <input type="text" class="form-control" name="search" value="@ViewBag.SearchText" />
                        <div class="input-group-btn">
                            <button id="btnchoose" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">@ViewBag.STypeName</button>
                            <ul class="dropdown-menu dropdown-menu-right">
                                <li><a href="javascript:addtype(1, 'Tên sản phẩm')">Tên sản phẩm</a></li>
                                <li><a href="javascript:addtype(4, 'Mã sản phẩm')">Mã sản phẩm</a></li>
                                <li><a href="javascript:addtype(2 , 'Nhà sản xuất')">Nhà sản xuất</a></li>
                                <li><a href="javascript:addtype(3 , 'Nhóm sản phẩm')">Nhóm sản phẩm</a></li>
                            </ul>
                        </div><!-- /btn-group -->

                    </div>
                </div>
                <div class="col-sm-4">
                    <button type="submit" class="btn btn-primary">Tìm sản phẩm</button>
                </div>
            </form>
        </div>

        <br />


        <fieldset>
            <table class="table table-striped table-bordered thumbnail-table">
                <thead>
                    <tr>
                        <th>Mã sản phẩm</th>
                        <th>Tên sản phẩm</th>
                        <th>Nhà sản xuất</th>
                        <th>Nhóm sản phẩm</th>
                        <th>Thông tin</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>@item.PCode</td>
                            <td>@item.PName</td>
                            <td>@item.Producer</td>
                            <td>@item.PGroup</td>
                            <td class="file-info valign-middle">
                                <span><strong class="semibold">Mã barcode:</strong> @item.Barcode</span> <br />
                                <span><strong class="semibold">Hoặt tính:</strong> @item.Material</span> <br />
                                <span><strong class="semibold">Đơn vị tính:</strong> @item.Unit</span><br />
                                <span><strong class="semibold">Điểm thẻ:</strong> @item.CardPoint</span><br />
                                <span><strong class="semibold">Điểm thùng:</strong> @item.BoxPoint</span>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
            Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount
            @Html.PagedListPager(Model, page => Url.Action("showproduct",
                              new { page, search = ViewBag.SearchText , type = ViewBag.SType}))
        </fieldset>

    </div>
</div>

@section scripts {

    <script type="text/javascript">
        function addtype(id, name) {
            console.log(name);
            $('input[name=type]').val(id);
            $('#btnchoose').html(name);
        }
    </script>
}